from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)

# Configuraci√≥n de la base de datos PostgreSQL
app.config['SQLALCHEMY_DATABASE_URI'] = 'postgresql://ecommerce_ikfq_user:Tdkv6RKytsf5d1pACeRJicF8tG2Ec2ON@dpg-crq0213v2p9s738di0j0-a.frankfurt-postgres.render.com/ecommerce_ikfq'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

db = SQLAlchemy(app)

class Product(db.Model):
    __tablename__ = 'ecommerce_products'

    id = db.Column(db.Integer, primary_key=True)
    product_name = db.Column(db.String)
    description = db.Column(db.String)
    category = db.Column(db.String)
    image_url = db.Column(db.String)
    is_available = db.Column(db.Boolean)
    original_price = db.Column(db.Numeric)
    sale_price = db.Column(db.Numeric)
    discount = db.Column(db.Numeric)

@app.route('/products')
def get_products():
    products = Product.query.all()
    return {'products': [{'id': product.id, 'name': product.product_name} for product in products]}

if __name__ == '__main__':
    app.run(debug=True)
